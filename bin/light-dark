#!/bin/bash

# Check current theme
current=$(gsettings get org.gnome.desktop.interface gtk-theme)

if [[ $current == "'Adwaita'" ]]; then
    # Switch to dark gnome theme
    gsettings set org.gnome.desktop.interface gtk-theme "Adwaita-dark"
    gsettings set org.gnome.desktop.interface color-scheme "prefer-dark"

    hyprctl hyprpaper unload "/home/matthew/.config/backgrounds/background.png"
    hyprctl hyprpaper unload "~/.local/share/dev/themes/current/background.png"
    
    rm -rf ~/.local/share/dev/themes/current
    ln -s ~/.local/share/dev/themes/dark ~/.local/share/dev/themes/current

    #Switch wallpapers
    hyprctl hyprpaper preload "~/.local/share/dev/themes/current/background.png"
    hyprctl hyprpaper wallpaper "eDP-1,~/.local/share/dev/themes/current/background.png"

    makoctl reload
    reload-ghostty
    notify-send "Switched to Dark Theme"
fi

if [[ $current == *"Adwaita-dark"* ]]; then
    # Switch to light gnome theme
    gsettings set org.gnome.desktop.interface gtk-theme "Adwaita"
    gsettings set org.gnome.desktop.interface color-scheme "prefer-light"

    hyprctl hyprpaper unload "/home/matthew/.config/backgrounds/background.png"
    hyprctl hyprpaper unload "~/.local/share/dev/themes/current/background.png"

    rm -rf ~/.local/share/dev/themes/current
    ln -s ~/.local/share/dev/themes/light ~/.local/share/dev/themes/current

    #Switch wallpapers
    hyprctl hyprpaper preload "~/.local/share/dev/themes/current/background.png"
    hyprctl hyprpaper wallpaper "eDP-1,~/.local/share/dev/themes/current/background.png"

    makoctl reload
    reload-ghostty
    notify-send "Switched to Light Theme"
fi
